# API платформы CarTrek

Эта документация содержит описание API платформы для каршеринга CarTrek. Программный интерфейс ПО CarTrek разработан с учётом принципов REST. Взаимодействие приложений, веб-интерфейса оператора и личного кабинета клиента происходит по протоколу HTTP и в формате JSON.

## Группы методов API CarTrek

Методы API CarTrek делятся на следующие группы:

* _Методы, доступные без авторизации._ Например, просмотр свобоных автомобилей без подробной информации /api/cars; метод авторизации /sign-in и др.
* _Методы, доступные авторизованным клиентам сервиса._ Например, метод бронирования автомобиля; метод получения информации о текущем пользователе и др.
* _Методы, доступные авторизованным операторам._ Например, метод получения полного списка автомобилей; метод блокировки/разблокировки/одобрения/удаления клиента; методы конфигурирования автомобилей и др.

## Авторизация запросов

Сервер в ответе на любой http-запрос устанавливает cookie с именем `sessid`, идентифицирующий сеанс клиента. После получения `sessid` клиент должен использовать его в последующих запросах в соответстующем заголовке HTTP:

    Cookie: sessid=R29gobJW49om2ILKnbwbL0ynysnpxHilfMK9s5l9A5qfaGd4KDLSjxjRCVr7xdiv; 

Если `Cookie: sessid` отсутствует в HTTP-запросе, сервер выдаст новый `sessid`.

Сеанс клиента может быть авторизованным и неавторизованным. Новый сеанс всегда неавторизованный. Авторизация сеанса осуществляется вызовом метода /profile/signin с корректными именем учётной записи и паролем. Авторизованный сеанс отличается от неавторизованного тем, что на сервере ему сопоставлен пользователь. Деавторизация производится вызовом метода /profile/signout. В результате деавторизации на сервере от сеанса отвязывается пользователь, при этом идентификатор сеанса продолжает использоваться.

## Актуальность документации
В данный момент описание API не претендует на полноту и пополняется по мере необходимости. Если вам требуется описание недокументированной возможности API, пожалуйста, запросите её по адресу [info@cartrek.online](mailto:info@cartrek.online?ssubject=Описание API). Если вы разработчик или продвинутый пользователь, вы всегда можете детально изучить работу того или иного функционала с помощью отладчика браузера.
